<!-- Views/Files/List.cshtml -->
@model FileListViewModel
@{
    ViewData["Title"] = "File Management";
}

<div class="d-flex justify-content-between align-items-center mb-4">
    <h1><i class="fas fa-folder me-2"></i>@ViewData["Title"]</h1>
    <a asp-action="Upload" class="btn btn-primary">
        <i class="fas fa-upload"></i> Upload New File
    </a>
</div>

<div class="row">
    <!-- Blob Storage Files -->
    <div class="col-md-6 mb-4">
        <div class="card">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0"><i class="fas fa-database me-2"></i>Azure Blob Storage</h5>
            </div>
            <div class="card-body">
                @if (Model.BlobFiles.Any())
                {
                    <div class="list-group">
                        @foreach (var file in Model.BlobFiles)
                        {
                            <div class="list-group-item d-flex justify-content-between align-items-center">
                                <div>
                                    <i class="fas fa-file @(GetFileIcon(file)) me-2"></i>
                                    @file
                                </div>
                                <div>
                                    <a asp-action="Download" asp-route-fileName="@file" asp-route-storageType="blob"
                                       class="btn btn-sm btn-outline-primary">
                                        <i class="fas fa-download"></i>
                                    </a>
                                </div>
                            </div>
                        }
                    </div>
                }
                else
                {
                    <div class="text-center py-4">
                        <i class="fas fa-database fa-2x text-muted mb-3"></i>
                        <p class="text-muted">No files in blob storage</p>
                    </div>
                }
            </div>
        </div>
    </div>

    <!-- File Storage Files -->
    <div class="col-md-6 mb-4">
        <div class="card">
            <div class="card-header bg-success text-white">
                <h5 class="mb-0"><i class="fas fa-folder me-2"></i>Azure File Storage</h5>
            </div>
            <div class="card-body">
                @if (Model.FileShareFiles.Any())
                {
                    <div class="list-group">
                        @foreach (var file in Model.FileShareFiles)
                        {
                            <div class="list-group-item d-flex justify-content-between align-items-center">
                                <div>
                                    <i class="fas fa-file @(GetFileIcon(file)) me-2"></i>
                                    @file
                                </div>
                                <div>
                                    <a asp-action="Download" asp-route-fileName="@file" asp-route-storageType="file"
                                       class="btn btn-sm btn-outline-success">
                                        <i class="fas fa-download"></i>
                                    </a>
                                </div>
                            </div>
                        }
                    </div>
                }
                else
                {
                    <div class="text-center py-4">
                        <i class="fas fa-folder fa-2x text-muted mb-3"></i>
                        <p class="text-muted">No files in file storage</p>
                    </div>
                }
            </div>
        </div>
    </div>
</div>

@functions {
    public string GetFileIcon(string fileName)
    {
        var extension = System.IO.Path.GetExtension(fileName).ToLower();
        return extension switch
        {
            ".pdf" => "fa-file-pdf text-danger",
            ".jpg" or ".jpeg" or ".png" or ".gif" => "fa-file-image text-success",
            ".doc" or ".docx" => "fa-file-word text-primary",
            ".xls" or ".xlsx" => "fa-file-excel text-success",
            ".zip" or ".rar" => "fa-file-archive text-warning",
            _ => "fa-file text-secondary"
        };
    }
}